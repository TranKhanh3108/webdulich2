{"version":3,"sources":["components/Register.jsx","components/Login.jsx","App.js","index.js"],"names":["Register","_ref","setShowRegister","success","setSuccess","useState","error","setError","usernameRef","useRef","emailRef","passwordRef","React","createElement","className","Room","onSubmit","async","e","preventDefault","newUser","username","current","value","email","password","axios","post","err","autoFocus","placeholder","ref","type","min","Cancel","onClick","Login","setShowLogin","setCurrentUsername","myStorage","user","res","data","setItem","App","window","localStorage","currentUsername","getItem","pins","setPins","currentPlaceId","setCurrentPlaceId","newPlace","setNewPlace","title","setTitle","desc","setDesc","star","setStar","viewport","setViewport","latitude","longitude","zoom","showRegister","showLogin","useEffect","allPins","get","console","log","getPins","style","height","width","ReactMapGL","Object","assign","mapboxApiAccessToken","process","REACT_APP_MAPBOX","transitionDuration","mapStyle","onViewportChange","onDblClick","lngLat","lat","long","map","p","Fragment","Marker","offsetLeft","offsetTop","fontSize","color","cursor","handleMarkerClick","id","_id","Popup","key","closeButton","closeOnClick","onClose","anchor","Array","rating","fill","Star","format","createdAt","newPin","onChange","target","handleLogout","removeItem","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b2323af7.chunk.js","sourcesContent":["import React  from 'react';\nimport { Cancel, Room } from \"@material-ui/icons\";\nimport axios from \"axios\";\nimport { useRef, useState } from \"react\";\nimport \"./register.css\";\n\nexport default function Register({ setShowRegister }) {\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState(false);\n  const usernameRef = useRef();\n  const emailRef = useRef();\n  const passwordRef = useRef();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const newUser = {\n      username: usernameRef.current.value,\n      email: emailRef.current.value,\n      password: passwordRef.current.value,\n    };\n\n    try {\n      await axios.post(\"/users/register\", newUser);\n      setError(false);\n      setSuccess(true);\n    } catch (err) {\n      setError(true);\n    }\n  };\n  return (\n    <div className=\"registerContainer\">\n      <div className=\"logo\">\n        <Room className=\"logoIcon\" />\n        <span>LamaPin</span>\n      </div>\n      <form onSubmit={handleSubmit}>\n        <input autoFocus placeholder=\"username\" ref={usernameRef} />\n        <input type=\"email\" placeholder=\"email\" ref={emailRef} />\n        <input\n          type=\"password\"\n          min=\"6\"\n          placeholder=\"password\"\n          ref={passwordRef}\n        />\n        <button className=\"registerBtn\" type=\"submit\">\n          Register\n        </button>\n        {success && (\n          <span className=\"success\">Successfull. You can login now!</span>\n        )}\n        {error && <span className=\"failure\">Something went wrong!</span>}\n      </form>\n      <Cancel\n        className=\"registerCancel\"\n        onClick={() => setShowRegister(false)}\n      />\n    </div>\n  );\n}\n","import { Cancel, Room } from \"@material-ui/icons\";\nimport axios from \"axios\";\nimport React  from 'react';\nimport { useRef, useState } from \"react\";\nimport \"./login.css\";\n\nexport default function Login({ setShowLogin, setCurrentUsername,myStorage }) {\n  const [error, setError] = useState(false);\n  const usernameRef = useRef();\n  const passwordRef = useRef();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const user = {\n      username: usernameRef.current.value,\n      password: passwordRef.current.value,\n    };\n    try {\n      const res = await axios.post(\"/users/login\", user);\n      setCurrentUsername(res.data.username);\n      myStorage.setItem('user', res.data.username);\n      setShowLogin(false)\n    } catch (err) {\n      setError(true);\n    }\n  };\n\n  return (\n    <div className=\"loginContainer\">\n      <div className=\"logo\">\n        <Room className=\"logoIcon\" />\n        <span>LamaPin</span>\n      </div>\n      <form onSubmit={handleSubmit}>\n        <input autoFocus placeholder=\"username\" ref={usernameRef} />\n        <input\n          type=\"password\"\n          min=\"6\"\n          placeholder=\"password\"\n          ref={passwordRef}\n        />\n        <button className=\"loginBtn\" type=\"submit\">\n          Login\n        </button>\n        {error && <span className=\"failure\">Something went wrong!</span>}\n      </form>\n      <Cancel className=\"loginCancel\" onClick={() => setShowLogin(false)} />\n    </div>\n  );\n}\n","import React  from 'react';\nimport \"./app.css\";\nimport ReactMapGL, { Marker, Popup } from \"react-map-gl\";\nimport { useEffect, useState } from \"react\";\nimport { Room, Star, } from \"@material-ui/icons\";\nimport axios from \"axios\";\nimport { format } from \"timeago.js\";\nimport Register from \"./components/Register\";\nimport Login from \"./components/Login\";\n\nfunction App() {\n  const myStorage = window.localStorage;\n  const [currentUsername, setCurrentUsername] = useState(myStorage.getItem(\"user\"));\n  const [pins, setPins] = useState([]);\n  const [currentPlaceId, setCurrentPlaceId] = useState(null);\n  const [newPlace, setNewPlace] = useState(null);\n  const [title, setTitle] = useState(null);\n  const [desc, setDesc] = useState(null);\n  const [star, setStar] = useState(0);\n  const [viewport, setViewport] = useState({\n    latitude: 47.040182,\n    longitude: 17.071727,\n    zoom: 4,\n  });\n  const [showRegister, setShowRegister] = useState(false);\n  const [showLogin, setShowLogin] = useState(false);\n\n  const handleMarkerClick = (id, lat, long) => {\n    setCurrentPlaceId(id);\n    setViewport({ ...viewport, latitude: lat, longitude: long });\n  };\n\n  const handleAddClick = (e) => {\n    const [longitude, latitude] = e.lngLat;\n    setNewPlace({\n      lat: latitude,\n      long: longitude,\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const newPin = {\n      username: currentUsername,\n      title,\n      desc,\n      rating: star,\n      lat: newPlace.lat,\n      long: newPlace.long,\n    };\n\n    try {\n      const res = await axios.post(\"/pins\", newPin);\n      setPins([...pins, res.data]);\n      setNewPlace(null);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  useEffect(() => {\n    const getPins = async () => {\n      try {\n        const allPins = await axios.get(\"/pins\");\n        setPins(allPins.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    getPins();\n  }, []);\n\n  const handleLogout = () => {\n    setCurrentUsername(null);\n    myStorage.removeItem(\"user\");\n  };\n\n  return (\n    <div style={{ height: \"100vh\", width: \"100%\" }}>\n      <ReactMapGL\n        {...viewport}\n        mapboxApiAccessToken={process.env.REACT_APP_MAPBOX}\n        width=\"100%\"\n        height=\"100%\"\n        transitionDuration=\"200\"\n        mapStyle=\"mapbox://styles/safak/cknndpyfq268f17p53nmpwira\"\n        onViewportChange={(viewport) => setViewport(viewport)}\n        onDblClick={currentUsername && handleAddClick}\n      >\n        {pins.map((p) => (\n          <>\n            <Marker\n              latitude={p.lat}\n              longitude={p.long}\n              offsetLeft={-3.5 * viewport.zoom}\n              offsetTop={-7 * viewport.zoom}\n            >\n              <Room\n                style={{\n                  fontSize: 7 * viewport.zoom,\n                  color:\n                    currentUsername === p.username ? \"tomato\" : \"slateblue\",\n                  cursor: \"pointer\",\n                }}\n                onClick={() => handleMarkerClick(p._id, p.lat, p.long)}\n              />\n            </Marker>\n            {p._id === currentPlaceId && (\n              <Popup\n                key={p._id}\n                latitude={p.lat}\n                longitude={p.long}\n                closeButton={true}\n                closeOnClick={false}\n                onClose={() => setCurrentPlaceId(null)}\n                anchor=\"left\"\n              >\n                <div className=\"card\">\n                  <label>Place</label>\n                  <h4 className=\"place\">{p.title}</h4>\n                  <label>Review</label>\n                  <p className=\"desc\">{p.desc}</p>\n                  <label>Rating</label>\n                  <div className=\"stars\">\n                    {Array(p.rating).fill(<Star className=\"star\" />)}\n                  </div>\n                  <label>Information</label>\n                  <span className=\"username\">\n                    Created by <b>{p.username}</b>\n                  </span>\n                  <span className=\"date\">{format(p.createdAt)}</span>\n                </div>\n              </Popup>\n            )}\n          </>\n        ))}\n        {newPlace && (\n          <>\n            <Marker\n              latitude={newPlace.lat}\n              longitude={newPlace.long}\n              offsetLeft={-3.5 * viewport.zoom}\n              offsetTop={-7 * viewport.zoom}\n            >\n              <Room\n                style={{\n                  fontSize: 7 * viewport.zoom,\n                  color: \"tomato\",\n                  cursor: \"pointer\",\n                }}\n              />\n            </Marker>\n            <Popup\n              latitude={newPlace.lat}\n              longitude={newPlace.long}\n              closeButton={true}\n              closeOnClick={false}\n              onClose={() => setNewPlace(null)}\n              anchor=\"left\"\n            >\n              <div>\n                <form onSubmit={handleSubmit}>\n                  <label>Title</label>\n                  <input\n                    placeholder=\"Enter a title\"\n                    autoFocus\n                    onChange={(e) => setTitle(e.target.value)}\n                  />\n                  <label>Description</label>\n                  <textarea\n                    placeholder=\"Say us something about this place.\"\n                    onChange={(e) => setDesc(e.target.value)}\n                  />\n                  <label>Rating</label>\n                  <select onChange={(e) => setStar(e.target.value)}>\n                    <option value=\"1\">1</option>\n                    <option value=\"2\">2</option>\n                    <option value=\"3\">3</option>\n                    <option value=\"4\">4</option>\n                    <option value=\"5\">5</option>\n                  </select>\n                  <button type=\"submit\" className=\"submitButton\">\n                    Add Pin\n                  </button>\n                </form>\n              </div>\n            </Popup>\n          </>\n        )}\n        {currentUsername ? (\n          <button className=\"button logout\" onClick={handleLogout}>\n            Log out\n          </button>\n        ) : (\n          <div className=\"buttons\">\n            <button className=\"button login\" onClick={() => setShowLogin(true)}>\n              Log in\n            </button>\n            <button\n              className=\"button register\"\n              onClick={() => setShowRegister(true)}\n            >\n              Register\n            </button>\n          </div>\n        )}\n        {showRegister && <Register setShowRegister={setShowRegister} />}\n        {showLogin && (\n          <Login\n            setShowLogin={setShowLogin}\n            setCurrentUsername={setCurrentUsername}\n            myStorage={myStorage}\n          />\n        )}\n      </ReactMapGL>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}